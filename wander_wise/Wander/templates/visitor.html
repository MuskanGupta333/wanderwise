{% load static %}


<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>Wander Wise - To visit places carefree</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="" name="keywords">
        <meta content="" name="description">

        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet"> 

        <!-- Icon Font Stylesheet -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

        <!-- Libraries Stylesheet -->
        <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
        <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

        <!-- Customized Bootstrap Stylesheet -->
        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="../../static/css/style.css" rel="stylesheet">

    <!--modal-->
    

<!-- Font Awesome CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    
         <!-- Include DateRangePicker CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css">
        <style>
            .bg-breadcrumb {
                            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(img/rumi.jpg);
                            background-position: center center;
                            background-repeat: no-repeat;
                            background-size: cover;
                            padding: 160px 0 60px 0;
                          }
            .img-fluid {
                  height:100%;
            }
           
            .testimonial {
    background: linear-gradient(rgba(21, 185, 217, 0.9), rgba(21, 185, 217, 0.9)), url(img/bg2.jpg);
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
    background-attachment: fixed;
           }
           .footer {
    background: linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9));
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
           }
         
           .col-lg-12 {   
    width: 30%;
            }
            .card{
                background-color: #15b9d9;
            }
            .card-header {
                  color: black;
            }
            
            #heading {
             font-size: 3.5rem;

                }
           
              
        /* Global Styles */
        .vertical {
            font-family: Arial, sans-serif;
            margin-top: 10vh !important;
           
            display: flex;
            min-height: 100vh;
            background: linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,106,1) 50%, rgba(0,209,251,1) 100%);
            /* background: linear-gradient(rgba(0, 0, 0, 0.9), rgba(251, 254, 255, 0.9)), url("{% static 'img/bg3.jpg' %}"); */
            background-position: center center;
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed;
           
        }
        .container {
            
            flex-grow: 1;
            padding: 20px;
        }
        .dashboard {
            width: 350px;
            color: white;
            background-color: #15b9d9;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .dashboard h1{
            font-size: 34px;
            color: white;
        }

        .dashboard h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 24px;
        }
        .dashboard p {
            margin-bottom: 10px;
        }
        .main-content {
            flex-grow: 1;
            padding: 20px;
            align-items: center !important;
            justify-content: center !important;
        }
        .main-content h1{
            color: white;
            text-align: center !important;
            margin-bottom: 2rem;
        }
        /* Guide Selection Form Styles */
        .guide-form {
            max-width: 500px;
            margin: 0 auto;
        }
        .guide-form label {
            display: block;
            color: white;
            margin-bottom: 5px;
        }
        .guide-form select,
        .guide-form input[type="datetime-local"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .guide-form button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .guide-form button:hover {
            background-color: #0056b3;
        }
        
        .status{
           
            margin-top: 2%;
        }

        .status h2{
            text-align: center;
            color:#fff;
            text-shadow:3px 3px 6px rgba(0, 0, 0, 1.5);
            font-weight:bold;
        }
        table{
            background-color: #fff;
            margin-top: 30px;
            border:10px solid #fff !important; 
        }
        .row-counter th {
            color:white;
            background-color: #000000;
        }

        .row-counter tr:nth-child(even) {
            color: #fff;
            background-color: #15b9d9;
        }

        .row-counter tr:hover {
            background-color: #ddd;
        }
        .row-counter {
        counter-reset: rowNumber;
    }

    /* Style the counter and apply it to the first cell in each row */
    .row-counter td:first-child::before {
        content: counter(rowNumber);
        counter-increment: rowNumber;
    }
    .inside-nav {
    padding: 10px;
    background-color: #dbdbdb; /* Light gray background */
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Soft shadow */
}
 .inside-nav h6{
    font-size: larger;
 }
.inside-nav p {
    margin-bottom: 5px; /* Space between paragraphs */
}

.inside-nav p:last-child {
    margin-bottom: 0; /* Remove bottom margin for the last paragraph */
}

#dashboard_content {
    width:100%;
    height: 80%;
    display: none;
    background-color:  rgba(255, 255, 255, 0.5); /* White background */
    border-radius: 10px; /* Rounded corners */
    padding: 20px; /* Add padding for content spacing */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add a subtle shadow */
}

/* Style for dashboard content */
#dashboard_content h1 {
    color: #333; /* Text color */
}

#dashboard_content h2 {
    color: #555; /* Text color */
}

/* Style for buttons inside the dashboard */
#dashboard_content button {
    margin-right: 10px; /* Add spacing between buttons */
}

.button-layer{
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
        }


.dash-buttons{
    width:23%;
    padding: 60px 0;
    border:none;
    font-size: x-large;
    border-radius: 10px; 
    color: rgb(255, 255, 255);
    /* font-weight: bold; */
}
.dash-buttons:hover{
    border:4px solid #fcfcfc;
    transition: ease-in-out 0.2s;
    color: white;
    font-weight: bolder;
}
#myModal{
    width:100%;
}


.close-btn {
            cursor: pointer;
            font-size: 20px;
            
            float: right;
        }

 .form-panel{
            width:100%;
            height: 80%;
    
            background-color:  rgba(255, 255, 255, 0.3); /* White background */
            border-radius: 10px; /* Rounded corners */
            padding: 20px; /* Add padding for content spacing */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add a subtle shadow */
        }

        .emoji-rating span {
            font-size: 24px;
            cursor: pointer;
            padding-right: 5px;
        }
        .emoji-rating span:hover {
            font-size: 34px;
            transition: ease-in-out 0.5s;
            color: #ffcc00; /* Change this color to your desired color */
        }
        .travel-tips{
            margin-top: 2%;
            width:49%;
            height:fit-content;
            background-color:  rgba(255, 255, 255, 0.3); /* White background */
            border-radius: 10px; /* Rounded corners */
            padding: 20px; /* Add padding for content spacing */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add a subtle shadow */
        }
        .static-content{
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
        }

        </style>
        
    </head>

    <body>

        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Topbar Start -->
        <div class="container-fluid bg-dark px-5 d-none d-lg-block">
            <div class="row gx-0 align-items-center" style="height: 45px;">
                <div class="col-lg-8 text-center text-lg-start mb-lg-0">
                    <div class="d-flex flex-wrap">
                        <a href="#" class="text-light me-4"><i class="fas fa-map-marker-alt text-primary me-2"></i>Find A Location</a>
                        <a href="#" class="text-light me-4"><i class="fas fa-phone-alt text-primary me-2"></i>+01234567890</a>
                        <a href="#" class="text-light me-0"><i class="fas fa-envelope text-primary me-2"></i>Example@gmail.com</a>
                    </div>
                </div>
                <div class="col-lg-4 text-center text-lg-end">
                    <div class="d-flex align-items-center justify-content-end">
                        <a href="#" class="btn btn-light btn-square border rounded-circle nav-fill me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="btn btn-light btn-square border rounded-circle nav-fill me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="btn btn-light btn-square border rounded-circle nav-fill me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="btn btn-light btn-square border rounded-circle nav-fill me-0"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Topbar End -->


        <!-- Navbar & Hero Start -->
        
        <div class="container-fluid position-relative p-0">
            
            <nav class="navbar navbar-expand-lg navbar-light bg-white px-4 px-lg-5 py-3 py-lg-0" style="padding-top: 0px  !important;
            padding-bottom: 0px  !important;">
                <a href="{%url 'index'%}" class="navbar-brand p-0">
                    <div id="heading">
                    <!-- <h1 class="text-primary m-0"><i class="fas fa-star-of-life me-3"></i>Wander Wise</h1> -->
                    <img src="{% static 'img/logo.png' %}" alt="WanderWise">
                    </div>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto py-0">
                        <a href="{% url 'logout' %}" class="btn btn-primary rounded-pill text-white py-2 px-4 flex-wrap flex-sm-shrink-0">LogOut</a>
                    </div>
                   
                </div>
            </nav>
       
        </div>
    
        <!-- Navbar End -->
    
    <!--dashboard-->   
    <div class="vertical" >
        <div class="dashboard sidebar">
            
          <button style="border: none; background-color: transparent;" onclick="showDashboard()"><h1><i class="fas fa-fw fa-tachometer-alt"></i>
           Dashboard</h1></button>   
             <!-- Divider -->
             <!-- <hr class="sidebar-divider my-0"> -->
             <hr>
            <h2>Hello, {{ user.first_name }} {{ user.last_name}} </h2>
            <hr>
            
            
            <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

                <li class="nav-item">
                    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                        aria-expanded="true" aria-controls="collapseTwo">
                        <h2><i class="fas fa-fw fa-chevron-right"></i></i>
                        My Plans</h2>
                    </a>
                    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                        <div class="bg-white py-2 collapse-inner rounded text-dark inside-nav">
                            {% if rate_responses %}
                            
                            {% for rate_response in rate_responses %} 
                            {% if rate_response.visit_plan.isBooked %}
                            <h6 class="collapse-header">Plan :</h6>
                            <p><b>Next Scheduled Visit:</b> {{rate_response.visit_plan.from_date_time}} - {{rate_response.visit_plan.to_date_time}}</p>
                            <p><b>Visit Place:</b>{{rate_response.visit_plan.place}}</p>
                            <p><b>Guide Name:</b>{{rate_response.guide.first_name}} {{rate_response.guide.last_name}}</p>
                            {% endif %}
                            {% endfor %}
                            {% else %}
                            <p>No plans yet</p>
                            {% endif %}
                        </div>
                    </div>
                </li>
                <hr>

                <li class="nav-item">
                    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsehis"
                        aria-expanded="true" aria-controls="collapsehis">
                        <h2><i class="fas fa-fw fa-chevron-right"></i></i>
                        History</h2>
                    </a>
                    <div id="collapsehis" class="collapse" aria-labelledby="headinghis" data-parent="#accordionSidebar">
                        <div class="bg-white py-2 collapse-inner rounded text-dark">
                            <p><b>Last Visited Place:</b> Lucknow Zoo</p>
                            <p><b>Last Visited Date: </b>April 10, 2024</p>
                        </div>
                    </div>
                </li>
                <hr>
            </ul> 
        </div>
    
        
        <div class="container">

            <div id="dashboard_content" style="display: none;">
                <button type="button"  class="btn btn-outline-dark close-btn" onclick="closeDashboard()">X</button> 
                
                <h1 style="color: white;">Welcome {{user.first_name}} ,  to your dashboard</h1>

                <hr style="color: whitesmoke; height: 3px; width: 100%;">
                <div id="dashboardOptions" class="button-layer">
                    <!-- <button id="myPlansBtn" class="btn btn-primary">My Plans</button> -->
                    <!-- <span class="close-btn" onclick="closeDashboard()">x</span> -->
        <button type="button" style="background: linear-gradient(90deg, rgba(17,184,0,1) 0%, rgba(69,255,0,1) 48%, rgba(87,255,67,1) 100%);" class="dash-buttons" data-toggle="modal" data-target="#myModal">My Plans</button>
    
    <!-- Modal -->
    <div id="myModal"  class="modal fade" role="dialog">
      <div class="modal-dialog modal-lg" >
    
        <!-- Modal content-->
        <div class="modal-content" style="background: linear-gradient(90deg, rgba(18,185,0,1) 0%, rgba(44,255,0,1) 48%, rgba(139,255,125,1) 100%);">
          <div class="modal-header">
            <h1 class="modal-title">My Plans</h1>
            <button type="button" class="close btn btn-outline-dark close-btn" data-dismiss="modal">&times;</button>
            
          </div>
          <div class="modal-body">
            
            <!--table-->
        <div class="status">
            {% if rate_responses %}
            <table class="table table-striped row-counter">
                <thead>
                    <tr>
                        <th>Next Visit:</th>
                        <th scope="col">From Date-Time</th>
                        <th scope="col">To Date-Time</th>
                        <th scope="col">Visit Place:</th>
                        <th scope="col">Guide Name:</th>
                        <th scope="col">Guide's Contact:</th>
                        <th scope="col">Rate:</th>
                        <th scope="col">Confirm Payment:</th>
                       
                    </tr>
                </thead>
                <tbody>
                    
        
                    {% for rate_response in rate_responses %} 
                    {% if rate_response.visit_plan.isBooked %}
                    <tr>
                        <td></td>
                        <td>{{rate_response.visit_plan.from_date_time}} </td>
                        <td>{{rate_response.visit_plan.to_date_time}}</td>
                        <td>{{rate_response.visit_plan.place}}</td>
                        <td>{{rate_response.guide.first_name}} {{rate_response.guide.last_name}}</td>
                        <td>{{rate_response.guide.profile.phone}}</td>
                        <td>{{rate_response.rate_amount}} </td>
                        <td>
                            {% if rate_response.visit_plan.isCompleted %}
                            <p>Paid</p>
                            {% else %}
                            <button type="button"  class="btn btn-outline-dark" data-toggle="modal" data-target="#pay">Pay</button>
                            
                            <!-- Modal content-->
                     <!-- Modal -->
                              <div id="pay" class="modal fade" role="dialog">
                               <div class="modal-dialog modal-lg">
      
          <!-- Modal content-->
                                 <div class="modal-content" style="background: linear-gradient(90deg, rgba(18,185,0,1) 0%, rgba(44,255,0,1) 48%, rgba(139,255,125,1) 100%);">
                                    <div class="modal-header">
                                    <h1 class="modal-title">Pay</h1>
                                    <button type="button" class="close btn btn-outline-dark close-btn" data-dismiss="modal">&times;</button>
              
                                    </div>
                                    <div class="modal-body">
                                        <form id="visitPlanForm" method="POST" action="{% url 'payment' %}" style="max-width: 500px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
                                            {% csrf_token %}
                                            
                                            <!-- Hidden input field for Visit Plan ID -->
                                            <input type="hidden" id="visitPlanId" name="visitPlanId" value="{{ rate_response.visit_plan.pk }}">
                                            
                                            <div class="col-xl-6">
                                                <label for="modeOfPayment" style="display: block; margin-bottom: 10px;">Mode of Payment:</label>
                                                <select id="modeOfPayment" name="modeOfPayment" class="form-select py-3 border-primary bg-transparent" aria-label="Default select example" required>
                                                    <option selected disabled>Choose mode of payment</option>
                                                    <option value="Cash">Cash</option>
                                                    <option value="Online">Online</option>
                                                </select>
                                            </div>
                                        
                                            <!-- Corrected value for isCompleted -->
                                            <input type="hidden" id="isCompleted" name="isCompleted" value="true">
                                        
                                            <button type="submit" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">Submit</button>
                                        </form>
                                        
                                    </div>
                                    <div class="modal-footer">
                                    <button type="button" class="btn btn-outline-dark close-btn" data-dismiss="modal">Close</button>
                                    </div>
                                 </div>
      
                               </div>
                              </div>
                              {% endif %}
                            


                        </td>
                    </tr>
                      {% endif %}
                     {% endfor %}
                    {% else %}
                    <tr>
                    <td colspan="6" ><h3 style="color: #fff;">Kindly generate request for the place you want to visit.</h3></td>
                    </tr>
                   {% endif %}

                </tbody>
            </table>
        </div>
            
  

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark close-btn" data-dismiss="modal">Close</button>
          </div>
        </div>
    
      </div>
    </div>
    
    <button type="button" style="background: linear-gradient(90deg, rgba(255,82,14,1) 0%, rgba(255,50,50,1) 28%, rgba(255,107,107,1) 100%);" class="dash-buttons" data-toggle="modal" data-target="#history">History</button>
                     <!-- Modal content-->
                     <!-- Modal -->
    <div id="history" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
      
          <!-- Modal content-->
          <div class="modal-content" style="background: linear-gradient(90deg, rgba(255,82,14,1) 0%, rgba(255,50,50,1) 28%, rgba(255,107,107,1) 100%);">
            <div class="modal-header">
                <h1 class="modal-title">History</h1>
              <button type="button" class="close btn btn-outline-dark close-btn" data-dismiss="modal">&times;</button>
             
            </div>
            <div class="modal-body" style="color:#fff">
                <!-- <p><b>Last Visited Place:</b> Lucknow Zoo</p>
                <p><b>Last Visited Date: </b>April 10, 2024</p> -->


                <div class="status">
                    {% if rate_responses %}
                    
                   
                    <table class="table table-striped row-counter">
                        <thead>
                            <tr>
                                <th>Next Visit:</th>
                                <th scope="col">From Date-Time</th>
                                <th scope="col">To Date-Time</th>
                                <th scope="col">Visit Place:</th>
                                <th scope="col">Guide Name:</th>
                                <th scope="col">Rate Amount:</th>
                                <th scope="col">Confirm Payment:</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for rate_response in rate_responses %} 
                            {% if rate_response.visit_plan.isPaid %}
                            <tr>
                                <td></td>
                                <td>{{rate_response.visit_plan.from_date_time}} </td>
                                <td>{{rate_response.visit_plan.to_date_time}}</td>
                                <td>{{rate_response.visit_plan.place}}</td>
                                <td>{{rate_response.guide.first_name}} {{rate_response.guide.last_name}}</td>
                                <td>{{rate_response.rate_amount}}</td>
                                <td>Paid</td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                   
                    
                      {% else %}
                      <p>History is Empty.</p>
                    {% endif %}
                </div>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-dark close-btn" data-dismiss="modal">Close</button>
            </div>
          </div>
      
        </div>
      </div>
        
      <button type="button" style="background: linear-gradient(90deg, rgba(255,145,0,1) 0%, rgba(255,196,0,1) 50%, rgba(251,255,68,1) 100%);" class="dash-buttons" data-toggle="modal" data-target="#feedback">Feedback</button>
                     <!-- Modal content-->
                     <!-- Modal -->
    <div id="feedback" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
      
          <!-- Modal content-->
          <div class="modal-content" style="background: linear-gradient(90deg, rgba(255,145,0,1) 0%, rgba(255,196,0,1) 50%, rgba(251,255,68,1) 100%);">
            <div class="modal-header">
                <h1 class="modal-title">Feedback</h1>
              <button type="button" class="close btn btn-outline-dark close-btn" data-dismiss="modal">&times;</button>
              
            </div>
            <div class="modal-body">
                <form id="feedbackForm" action="{%url 'submit_feedback'%}" method="POST" style="max-width: 500px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
                    {% csrf_token %}

                    <label for="feedback" style="display: block; margin-bottom: 10px;">Your Feedback:</label>
                    <textarea id="feedback" name="feedback" rows="5" style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 5px;" required></textarea>
                                
                    <label for="rating" style="display: block; margin-bottom: 10px;">Rating:</label>
                    <input type="hidden" id="selectedRating" name="rating" value="" required>
                    <div class="emoji-rating">
                        <span class="rating-option" data-value="Very Poor">😞</span> <!-- Very Poor -->
                        <span class="rating-option" data-value="Poor">😕</span> <!-- Poor -->
                        <span class="rating-option" data-value="Good">😊</span> <!-- Good -->
                        <span class="rating-option" data-value="Very Good">😄</span> <!-- Very Good -->
                        <span class="rating-option" data-value="Excellent">😍</span> <!-- Excellent -->
                    </div>
                        
                    <button type="submit" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">Submit Feedback</button>
                </form>
            
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-dark close-btn" data-dismiss="modal">Close</button>
            </div>
          </div>
      
        </div>
      </div>
       
      
      <button type="button" style="background: linear-gradient(90deg, rgba(124,0,163,1) 0%, rgba(189,68,227,1) 50%, rgba(239,206,250,1) 100%);" class="dash-buttons" data-toggle="modal" data-target="#explore">About Us</button>
                     <!-- Modal content-->
                     <!-- Modal -->
    <div id="explore" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
      
          <!-- Modal content-->
          <div class="modal-content" style="background: linear-gradient(90deg, rgba(124,0,163,1) 0%, rgba(189,68,227,1) 50%, rgba(239,206,250,1) 100%);">
            <div class="modal-header">
                <h1 class="modal-title">About Us</h1>
              <button type="button" class="close btn btn-outline-dark close-btn" data-dismiss="modal">&times;</button>
              
            </div>
            <div class="modal-body">
                <div class="about-content" style="background: rgba(255, 255, 255, 0.5); margin: 7px; border-radius: 10px;">
                    <p style="color: #000000;">Our team is composed of travel enthusiasts, technology experts, and industry professionals who are dedicated to providing a seamless and personalized experience for both travelers and guides. We carefully vet each guide on our platform to ensure they possess the knowledge, professionalism, and enthusiasm needed to enhance your travel experience.</p>
                    </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-dark close-btn" data-dismiss="modal">Close</button>
            </div>
          </div>
      
        </div>
      </div>
            
            </div>
              <div class="static-content">
                <!-- linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,106,1) 50%, rgba(0,209,251,1) 100%) ; -->
                <div class="travel-tips " >
                    <h2 style="color: white;">Do's ✅ </h2>
                    <hr style="color: whitesmoke; height: 3px; width: 100%;">
                    <ul style="color:#000000; font-size: large; font-weight: bold;">
                        <li>Pack light and smart, considering the weather and activities.</li>
                        <li>Keep emergency contacts and important documents handy.</li>
                        <li>Stay hydrated and eat healthily during your travels.</li>
                        <li>Have a flexible itinerary to accommodate unexpected changes.</li>
                        <li>Stay alert and mindful of your surroundings for safety.</li>
                        <li>Capture memories but also take time to enjoy the moment.</li>
                    </ul>
                </div>
                <div class="travel-tips">
                    <h2 style="color: white;">Don'ts ❌  </h2>
                    <hr style="color: whitesmoke; height: 3px; width: 100%;">
                    <ul style="color:#000000; font-size: large; font-weight: bold;">
                        <li>Don't carry excessive cash</li>
                        <li>Don't share sensitive information with strangers.</li>
                        <li>Don't overplan every minute; allow for leisure.</li>
                        <li>Don't engage in behaviors that disrespect local laws.</li>
                        <li>Don't litter or harm the environment.</li>
                        <li>Don't disregard local customs regarding dress code and behavior.</li>
                    </ul>
                </div>
            </div>

            </div>



            <div class="main-content" id="main-content">
               <div class="form-panel">
                <h1>Plan your next visit with us 😊 </h1>
                
                <form class="guide-form" id="guideForm" method="post" action="{% url 'Visitplan' %}" onsubmit="return visitplansuccess();" >
                    {% csrf_token %}
                    <input type="hidden" name="user" value="{{ request.user.id }}">
                    <label for="city">Select City:</label>
                    <select id="city" name="city">
                        <option value="">Select City</option>
                        <option value="Lucknow">Lucknow</option>
                    </select>
                    <label for="places">Select Place:</label>
                    <select id="places" name="place">
                        <option value="">Select Place</option>
                        <option value="Lucknow Zoo">Lucknow Zoo</option>
                        <option value="Bara Imambara">Bara Imambara</option>
                        <option value="Chota Imambara">Chota Imambara</option>
                        <option value="Rumi Darwaza">Rumi Darwaza</option>
                    </select>
                    <label for="datetime">Select Date and Time :</label>
                    <input type="text" id="datePickerInput" name="datetimes" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 20px;" />
                    <input type="hidden" id="fvisitDate" name="from_date_time">
                    <input type="hidden" id="tvisitDate" name="to_date_time">
                    <button type="submit" class="btn btn-primary btn-lg btn-block" style="width: fit-content;">Generate Requests</button>
                    
                </form>
                

               </div>
                    {% if rate_responses %}

                    <hr style="color: rgb(255, 255, 255); background-color: rgb(255, 255, 255); height: 3px; width: 100%; border-top: 1px solid #fff;; margin-top: 5%; margin-bottom: 5%;">

                <div class="status">
                 
                <h2> Requests Status </h2>
                    <table class="table table-striped row-counter">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th scope="col">City</th>
                                <th scope="col">Place</th>
                                <th scope="col">From</th>
                                <th scope="col">To</th>
                                <th scope="col">Rate Amount</th>
                                <th scope="col">Insert Date-Time</th>
                               <th scope="col">Guide Username</th>
                               <th scope="col">Book a Guide</th> <!-- Added a new column for the action -->

                            
                            </tr>
                        </thead>
                        <tbody>
                            {% for rate_response in rate_responses%}
                            <tr>
                                <td></td>
                                <td>{{ rate_response.visit_plan.city }}</td>
                                <td>{{ rate_response.visit_plan.place }}</td>
                                <td>{{ rate_response.visit_plan.from_date_time }}</td>
                                <td>{{ rate_response.visit_plan.to_date_time }}</td>
                                <td>{{ rate_response.rate_amount }}</td>
                                <td>{{ rate_response.insert_datetime }}</td>
                                <td>{{ rate_response.guide.username }}</td>
                                <td>
                                    {% if not rate_response.visit_plan.isBooked %}
                                    <form method="post" action="{% url 'book_guide' %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="visit_plan_id" value="{{ rate_response.visit_plan.pk }}">
                                        <button type="submit" class="btn btn-primary">Book Guide</button>
                                    </form>
                                    {% else %}
                                    <span class="text-success">Guide Booked</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                    {% else %}
               <p></p>
                {% endif %}
            </div>
        </div>
    </div>


         <!-- Footer Start -->
         <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-md-6 col-lg-6 col-xl-3">
                        <div class="footer-item d-flex flex-column">
                            <img src="{% static 'img/logof.png' %}" alt="WanderWise">
                            <p>At WanderWise, we're passionate about connecting travelers with local guides who bring destinations to life.
                            </p>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-share fa-2x text-white me-2"></i>
                                <a class="btn-square btn btn-primary text-white rounded-circle mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                                <a class="btn-square btn btn-primary text-white rounded-circle mx-1" href=""><i class="fab fa-twitter"></i></a>
                                <a class="btn-square btn btn-primary text-white rounded-circle mx-1" href=""><i class="fab fa-instagram"></i></a>
                                <a class="btn-square btn btn-primary text-white rounded-circle mx-1" href=""><i class="fab fa-linkedin-in"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6 col-xl-3">
                        <div class="footer-item d-flex flex-column">
                            <h4 class="mb-4 text-white">Quick Links</h4>
                            <a href="about.html"><i class="fas fa-angle-right me-2"></i> About Us</a>
                            <a href="contact.html"><i class="fas fa-angle-right me-2"></i> Contact Us</a>
                            <a href=""><i class="fas fa-angle-right me-2"></i> Privacy Policy</a>
                            <a href=""><i class="fas fa-angle-right me-2"></i> Terms & Conditions</a>
                
                        </div>
                    </div>
                   
                    <div class="col-md-6 col-lg-6 col-xl-3">
                        <div class="footer-item d-flex flex-column">
                            <h4 class="mb-4 text-white">Contact Info</h4>
                            <a href=""><i class="fa fa-map-marker-alt me-2"></i> Nirala Nagar, Lucknow, Uttar Pradesh, India</a>
                            <a href=""><i class="fas fa-envelope me-2"></i> info@example.com</a>
                            <a href=""><i class="fas fa-envelope me-2"></i> info@example.com</a>
                            <a href=""><i class="fas fa-phone me-2"></i> +91-9876543210</a>
                            <a href="" class="mb-3"><i class="fas fa-print me-2"></i> +91-7654321098</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->
        
        <!-- Copyright Start -->
        <div class="container-fluid copyright py-4">
            <div class="container">
                <div class="row g-4 align-items-center">
                    <div class="col-md-6 text-center text-md-start mb-md-0">
                        <span class="text-white"><a href="#"><i class="fas fa-copyright text-light me-2"></i>Wander Wise</a>, All right reserved.</span>
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- Copyright End -->

        <!-- Back to Top -->
        <a href="#" class="btn btn-primary btn-lg-square back-to-top"><i class="fa fa-arrow-up"></i></a>   

        
        <!-- JavaScript Libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="../../static/lib/wow/wow.min.js"></script>
        <script src="../../static/lib/easing/easing.min.js"></script>
        <script src="../../static/lib/waypoints/waypoints.min.js"></script>
        <script src="../../static/lib/owlcarousel/owl.carousel.min.js"></script>
 
         <!-- Template Javascript -->
        <script src="../../static/js/main.js"></script>


<!-- For nav -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    

         <!-- Include jQuery -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
         <!-- Include Moment.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
         
         <!-- Include DateRangePicker JS -->
        <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script> 
        
        
        
        <script>
        function showDashboard() {
            document.getElementById('main-content').style.display = 'none';
            // document.body.style.backgroundColor = '#f0f0f0 ';
            document.getElementById('dashboard_content').style.display = 'block';
            
        }

        function closeDashboard() {
            document.getElementById('dashboard_content').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            // document.body.style.backgroundColor = '';
        }


        function setRating(event) {
            const selectedEmoji = event.target;
            if (selectedEmoji.tagName === 'SPAN') {
                const value = selectedEmoji.getAttribute('data-value');
                console.log('Selected Rating:', value);
                // You can add further logic here, like updating the UI to reflect the selected rating.
            }
        }

            document.addEventListener('DOMContentLoaded', function() {
                var submitBtn = document.getElementById('submitBtn');
                submitBtn.addEventListener('click', function() {
                    // Fetch form data
                    var formData = new FormData(document.getElementById('guideForm'));
        
                    // Send form data using fetch API
                    fetch("{% url 'visitor' %}", {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-CSRFToken': document.querySelector('input[name="csrfmiddlewaretoken"]').value
                        }
                    })
                    .then(response => {
                        if (response.ok) {
                            console.log("Visit Plan submitted successfully!");
                            // You can redirect to a success page or do other actions here
                        } else {
                            console.error("Error submitting form:", response.statusText);
                        }
                    })
                    .catch(error => {
                        console.error("Error submitting form:", error);
                    });
                });
            });
            $(function() {
      $('input[name="datetimes"]').daterangepicker({
        timePicker: true,
        startDate: moment().startOf('hour'),
        endDate: moment().startOf('hour').add(32, 'hour'),
        locale: {
          format: 'M/DD hh:mm A'
        },
        minDate: moment(), // Disable past dates
        minTime: moment().startOf('hour') // Disable past times
      });
    });

    $('#datePickerInput').on('apply.daterangepicker', function(ev, picker) {
            // Extract start and end dates from the selected range
            var fromDate = picker.startDate.format('YYYY-MM-DD HH:mm');
            var toDate = picker.endDate.format('YYYY-MM-DD HH:mm');

            // Store the extracted dates into separate fields
            document.getElementById("fvisitDate").value = fromDate;
            document.getElementById("tvisitDate").value = toDate;
        });

      
    function visitplansuccess() {
        // Display the message box
        alert("Request Submitted Succesfully!");
        // Return true to allow form submission
        return true;
    }



        document.getElementById('visitPlanForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission
        
        // Get the selected mode of payment
        var modeOfPayment = document.getElementById('modeOfPayment').value;
        
        // Set isCompleted to true
        document.getElementById('isCompleted').value = 'true';
        
        // Now submit the form
        this.submit();
    });

    document.addEventListener('DOMContentLoaded', function() {
        const ratingOptions = document.querySelectorAll('.rating-option');
        const selectedRatingInput = document.getElementById('selectedRating');

        ratingOptions.forEach(option => {
            option.addEventListener('click', function() {
                const selectedRating = this.getAttribute('data-value');
                selectedRatingInput.value = selectedRating;
                ratingOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });
    });
        </script>

    </body>

</html>


